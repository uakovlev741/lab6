
<!DOCTYPE html>
<head>
	<title>Figure</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		body {
			margin: 0;
			padding: 0;
			overflow: hidden;
			background: #f0f0f0;
			font-family: Arial, sans-serif;
		}

		#info {
			position: absolute;
			top: 20px;
			width: 100%;
			text-align: center;
			color: #333;
			font-size: 24px;
			font-weight: bold;
			z-index: 100;
		}
	</style>
</head>
<body>
	<div id="info">Figure</div>

	<script type="importmap">
		{
			"imports": {
				"three": "https://unpkg.com/three@0.162.0/build/three.module.js",
				"three/addons/": "https://unpkg.com/three@0.162.0/examples/jsm/"
			}
		}
	</script>

	<script type="module">
		import * as THREE from 'three';
		import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

		var camera, scene, renderer;
		var controls;
		var ambientLight, light;

		init();
		animate();

		function init() {
			var container = document.createElement('div');
			document.body.appendChild(container);

			// CAMERA
			camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 2000);

			// LIGHTS
			ambientLight = new THREE.AmbientLight(0x404040, 1.0);
			light = new THREE.DirectionalLight(0xFFFFFF, 1.0);
			light.position.set(100, 100, 100);

			// RENDERER
			renderer = new THREE.WebGLRenderer({ antialias: true });
			renderer.setPixelRatio(window.devicePixelRatio);
			renderer.setSize(window.innerWidth, window.innerHeight);
			renderer.shadowMap.enabled = true;
			container.appendChild(renderer.domElement);

			// EVENTS
			window.addEventListener('resize', onWindowResize, false);

			// CONTROLS
			controls = new OrbitControls(camera, renderer.domElement);
			controls.enableDamping = true;
			controls.dampingFactor = 0.05;

			// Исправлена позиция камеры
			camera.position.set(0, 100, 200);
			controls.target.set(0, 50, 0);

			// scene itself
			scene = new THREE.Scene();
			scene.background = new THREE.Color(0x111111); // темно-серый фон

			scene.add(ambientLight);
			scene.add(light);

			// Добавляем немного дополнительного освещения
			const light2 = new THREE.DirectionalLight(0xffffff, 0.5);
			light2.position.set(-100, 100, -100);
			scene.add(light2);

			
			const scale = 6; // Уменьшил масштаб с 10 до 6

			// фигура (золотая)
			const curve2 = new THREE.CubicBezierCurve(
				new THREE.Vector2(4, 0).multiplyScalar(scale),
				new THREE.Vector2(18, 6).multiplyScalar(scale),
				new THREE.Vector2(-0.5, 18).multiplyScalar(scale),
				new THREE.Vector2(6, 28).multiplyScalar(scale)
			);

			const points2 = curve2.getPoints(36);
			var geometry2 = new THREE.LatheGeometry(points2, 64);

			// Золотой цвет
			var mater1 = new THREE.MeshPhongMaterial({
				color: 0xad7600, // Коричневый цвет вместо синего
				shininess: 100
			});
			var mater2 = new THREE.MeshPhongMaterial({
				color:  0xad7600, // Темно-коричневый для внутренней стороны
				side: THREE.BackSide
			});
			var obj1 = new THREE.Mesh(geometry2, mater1);
			var obj2 = new THREE.Mesh(geometry2, mater2);

			// Включаем тени
			obj1.castShadow = true;
			obj1.receiveShadow = true;
			obj2.receiveShadow = true;

			obj1.position.set(0, 50, 0); // Поставил в центр
			obj2.position.set(0, 50, 0); // Поставил в центр
			scene.add(obj1);
			scene.add(obj2);

			// Добавляем пол (плоскость)
			const planeGeometry = new THREE.PlaneGeometry(1000, 1000);
			const planeMaterial = new THREE.MeshPhongMaterial({ color: 0x808080 });
			const plane = new THREE.Mesh(planeGeometry, planeMaterial);
			plane.rotation.x = -Math.PI / 2;
			plane.position.y = -30; // Поднял пол
			plane.receiveShadow = true;
			scene.add(plane);

			// Добавляем вспомогательную сетку
			const gridHelper = new THREE.GridHelper(500, 20, 0x0000ff, 0x808080);
			gridHelper.position.y = -30; // Поднял сетку
			scene.add(gridHelper);
		}

		// EVENT HANDLERS
		function onWindowResize() {
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();
			renderer.setSize(window.innerWidth, window.innerHeight);
		}

		function animate() {
			requestAnimationFrame(animate);

			// Медленное вращение фигуры
			if (scene.children[2]) {
				scene.children[2].rotation.y += 0.005;
			}
			if (scene.children[3]) {
				scene.children[3].rotation.y += 0.005;
			}

			controls.update();
			render();
		}

		function render() {
			renderer.render(scene, camera);
		}
	</script>
</body>
</html>
